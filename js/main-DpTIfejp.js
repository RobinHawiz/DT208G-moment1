(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))a(t);new MutationObserver(t=>{for(const r of t)if(r.type==="childList")for(const s of r.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&a(s)}).observe(document,{childList:!0,subtree:!0});function n(t){const r={};return t.integrity&&(r.integrity=t.integrity),t.referrerPolicy&&(r.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?r.credentials="include":t.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function a(t){if(t.ep)return;t.ep=!0;const r=n(t);fetch(t.href,r)}})();class f{constructor(e=[]){this.list=e}getDataList(){return[...this.list]}addItem(e){this.list.push(e)}}async function L(o){try{const e=await fetch(o);if(!e.ok)throw new Error(`Network error: ${e.status}`);return await e.json()}catch(e){throw new Error(`Fetch error: ${e.message}`)}}function g(o){let e=document.querySelector("tbody");e&&e.remove();let n=document.querySelector("table"),a=document.createElement("tbody");const t=document.createDocumentFragment();o.forEach(({code:r,coursename:s,progression:i,syllabus:u})=>{const l=document.createElement("tr");[r,s,i].forEach((c,y)=>{const m=document.createElement("td");if(y===0){const d=document.createElement("a");d.innerText=c,d.href=u,d.target="_blank",m.appendChild(d)}else m.innerText=c;l.appendChild(m)}),t.appendChild(l)}),a.appendChild(t),n.appendChild(a)}function h(o,e){try{localStorage.removeItem(o),localStorage.setItem(o,JSON.stringify(e))}catch(n){console.error("Error accessing localStorage: ",n)}}function p(o){try{const e=localStorage.getItem(o);return e?JSON.parse(e):[]}catch(e){return console.error("Error accessing localStorage: ",e),[]}}function v(o){const e=document.querySelector("form");e.addEventListener("submit",t);const n=e.querySelector("#course-code"),a=e.querySelector("#progression");n.addEventListener("input",()=>{r(n,"")}),a.addEventListener("input",()=>{r(a,"")});function t(s){s.preventDefault();let i=new f(p("Courses")),u=!0,l=i.getDataList().find(({code:c})=>c===n.value);l&&(r(n,"Kurskoden finns redan. Var vänlig och ange en unik kurskod."),u=!1),!l&&!["A","B","C"].includes(a.value)&&(r(a,"Felaktig progression. Var vänlig och ange en korrekt progression: A, B eller C."),u=!1),u&&o(s)}function r(s,i){s.setCustomValidity(i),s.reportValidity()}}function w(o){const e=o.target,n=e.querySelector("#course-code"),a=e.querySelector("#course-name"),t=e.querySelector("#progression"),r=n.value,s=a.value,i=t.value,l={code:r,coursename:s,progression:i,syllabus:"https://www.youtube.com/watch?v=WIRK_pGdIdA&list=PLpQpolEIRhPtKIte1nTmjYcJCriNwj20L&ab_channel=doober43"};let c=new f(p("Courses"));c.addItem(l),h("Courses",c.getDataList()),g(c.getDataList()),alert("Din kurs har lagts till längst ner i listan!")}async function S(){let o,e=new f(p("Courses"));e.getDataList().length!==0?o=e:(o=new f(await L("https://webbutveckling.miun.se/files/ramschema_ht24.json")),h("Courses",o.getDataList())),g(o.getDataList()),v(w)}S();
