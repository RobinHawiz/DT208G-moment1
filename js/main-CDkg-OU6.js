(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))a(t);new MutationObserver(t=>{for(const r of t)if(r.type==="childList")for(const s of r.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&a(s)}).observe(document,{childList:!0,subtree:!0});function n(t){const r={};return t.integrity&&(r.integrity=t.integrity),t.referrerPolicy&&(r.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?r.credentials="include":t.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function a(t){if(t.ep)return;t.ep=!0;const r=n(t);fetch(t.href,r)}})();class f{constructor(e=[]){this.list=e}getDataList(){return[...this.list]}addItem(e){this.list.push(e)}}async function y(o){try{const e=await fetch(o);if(!e.ok)throw new Error(`Network error: ${e.status}`);return await e.json()}catch(e){throw new Error(`Fetch error: ${e.message}`)}}function g(o){let e=document.querySelector("tbody");e&&e.remove();let n=document.querySelector("table"),a=document.createElement("tbody");o.forEach(({code:t,coursename:r,progression:s,syllabus:c})=>{const i=document.createElement("tr");[t,r,s].forEach((l,u)=>{const p=document.createElement("td");if(u===0){const d=document.createElement("a");d.innerText=l,d.href=c,d.target="_blank",p.appendChild(d)}else p.innerText=l;i.appendChild(p)}),a.appendChild(i)}),n.appendChild(a)}function h(o,e){try{localStorage.removeItem(o),localStorage.setItem(o,JSON.stringify(e))}catch(n){console.error("Error accessing localStorage: ",n)}}function m(o){try{const e=localStorage.getItem(o);return e?JSON.parse(e):[]}catch(e){return console.error("Error accessing localStorage: ",e),[]}}function L(o){const e=document.querySelector("form");e.addEventListener("submit",t);const n=e.querySelector("#course-code"),a=e.querySelector("#progression");n.addEventListener("input",()=>{r(n,"")}),a.addEventListener("input",()=>{r(a,"")});function t(s){s.preventDefault();let c=new f(m("Courses")),i=!0,l=c.getDataList().find(({code:u})=>u===n.value);l&&(r(n,"Kurskoden finns redan. Var vänlig och ange en unik kurskod."),i=!1),l&&!["A","B","C"].includes(a.value)&&(r(a,"Felaktig progression. Var vänlig och ange en korrekt progression: A, B eller C."),i=!1),i&&o(s)}function r(s,c){s.setCustomValidity(c),s.reportValidity()}}function v(o){const e=o.target,n=e.querySelector("#course-code"),a=e.querySelector("#course-name"),t=e.querySelector("#progression"),r=n.value,s=a.value,c=t.value,l={code:r,coursename:s,progression:c,syllabus:"https://www.youtube.com/watch?v=WIRK_pGdIdA&list=PLpQpolEIRhPtKIte1nTmjYcJCriNwj20L&ab_channel=doober43"};let u=new f(m("Courses"));u.addItem(l),h("Courses",u.getDataList()),g(u.getDataList()),alert("Din kurs har lagts till längst ner i listan!")}async function w(){let o,e=new f(m("Courses"));e.getDataList().length!==0?o=e:(o=new f(await y("https://webbutveckling.miun.se/files/ramschema_ht24.json")),h("Courses",o.getDataList())),g(o.getDataList()),L(v)}w();
